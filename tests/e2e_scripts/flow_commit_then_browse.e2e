# Flow: Stage all and commit, then browse the new commit in the log
make_test_repo
resize 1280 720
wait_frames 5

# Record initial state (1 staged .gitignore)
validate staged_count=1
screenshot flow_fullcycle_01_initial

# Click Commit in sidebar toolbar â€” opens unstaged dialog
click_button "Commit"
wait_frames 10
screenshot flow_fullcycle_02_unstaged_dialog

# Click "Stage All & Commit" to stage everything and commit
click_button "Stage All & Commit"
wait_frames 10
wait_for_refresh
screenshot flow_fullcycle_03_committed

# After commit, staged count should be 0
validate staged_count=0

# The new commit with default message should appear in the log
click_text "Update"
wait_frames 5
screenshot flow_fullcycle_04_commit_detail
