# Flow: Commit staged changes via the sidebar toolbar
make_test_repo
resize 1280 720
wait_frames 5

# Initial state: 1 staged file (.gitignore), unstaged + untracked files
validate staged_count=1
screenshot flow_commit_01_initial

# Click Commit in sidebar toolbar â€” opens unstaged dialog
click_button "Commit"
wait_frames 10
screenshot flow_commit_02_unstaged_dialog

# Click "Stage All & Commit" to stage everything and commit
click_button "Stage All & Commit"
wait_frames 10
wait_for_refresh
screenshot flow_commit_03_committed

# After commit, staged count should be 0 (clean tree)
validate staged_count=0
screenshot flow_commit_04_clean_state
